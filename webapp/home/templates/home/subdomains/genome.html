{% extends 'home/header.html' %}

{% load static %}
{% load markdown %}


{% block head %}
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Exo+2:wght@200&display=swap" rel="stylesheet">

<link rel="stylesheet" href="{% static 'home/css/index.css' %}">
<link rel="stylesheet" href="{% static 'home/css/subdomains/genome.css' %}">
{% endblock %}


{% block content %}


<main>
  {% include 'home/subdomains/components/floating-info-button.html' %}
  {% include 'home/subdomains/components/feedback.html' with subdomain='genome' %}

  <section class="container-flex text-center my-3">
    <div class="row justify-content-center">
      <div class="col-auto">
        <div class="d-flex align-items-center h-100">
          <img id="header-logo" src="{% static 'home/img/subdomains/genome/logo.png' %}" alt="Galaxy Australia Logo">
        </div>
      </div>
      <div class="col-auto">
        <div class="header-genome australia d-flex align-items-center h-100">
          GENOME
        </div>
      </div>
    </div>
  </section>

  <section class="container-fluid my-5" id="tagline">
    {% include 'home/snippets/static-notices.html' %}

    <p class="lead">
      Welcome to the Galaxy Australia Genomics community site. Get quick access to tools, workflows and tutorials for genome assembly and annotation.
    </p>
  </section>

  {% for section in sections %}
    <!-- Data section only for now -->
    {% include 'home/subdomains/components/section.html' with section=section %}
  {% endfor %}

  <section class="my-5">
    <h4 class="mb-3">Connect with the Genomics Community</h4>
    <a class="ga-btn" href="">Link</a>
    <button
      class="ga-btn"
      data-bs-toggle="modal"
      data-bs-target="#feedbackModal"
    >
      Page Feedback
  </button>
  </section>
</main>

{% endblock %}


{% block script %}
{% endblock %}


{% block onload %}
  // Ensure that notice links open in new tab if external
  $('.notice a').each( (i, item) => {
    if (!item.href.includes("{{ HOSTNAME }}")) {
      item.target = '_blank';
    }
  });

  // TODO: Remove - development only (don't leave behind TBC text)
  $('p').filter( (i, el) => el.innerText.toLowerCase().includes('tbc') ).each(
    (i, item) => {
      item.innerHTML = item.innerHTML
        .replace('TBC', '<span class="text-danger fw-bold">TBC</span>')
        .replace('tbc', '<span class="text-danger fw-bold">TBC</span>');
      $(item).closest('.accordion-item').find('.accordion-button').addClass('bg-danger');
      const paneId = $(item).closest('.tab-pane')[0].id;
      $(`#${paneId.replace('-panel', '-tab')}`).addClass('bg-danger');
    }
  );
{% endblock %}
